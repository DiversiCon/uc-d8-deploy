langcode: en
status: true
id: migrate_content_story_smartbody
class: Drupal\migrate\Plugin\Migration
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - 'Drupal 7'
  - Content
migration_group: legacy
label: 'Content: Story/Smartbody'
source:
  plugin: d7_node_story
  node_type: uniquely_chicago
  constants:
    format: 'smartbody'
    parent_type: 'node'
    parent_field_name: 'field_smart_body'
process:
#  status_message:
#    plugin: debug_migrate
#    source: smartbody
  parent_id: nid
  parent_type: constants/parent_type
  parent_field_name: constants/parent_field_name
  field_smartbody_text/value: smartbody
  field_smartbody_text/format: constants/format
  pullquote_ids:
    plugin: migration_lookup
    migration: migrate_content_story_quote
    source: nid
  field_smartbody_components/target_id:
    plugin: extract
    source: '@pullquote_ids'
    index:
    - 0
  field_smartbody_components/target_revision_id:
    plugin: extract
    source: '@pullquote_ids'
    index:
    - 1
#  field_smartbody_text:
#    plugin: iterator
#    source: smartbody
#    process:
#      value: value
#      format:
#        plugin: default_value
#        default_value: smartbody
destination:
  plugin: 'entity_reference_revisions:paragraph'
  default_bundle: smartbody

migration_dependencies:
  required: { }
  optional:
    - d7_field_instance
dependencies:
  module:
    - uc_migrate
  enforced:
    module:
      - uc_migrate
