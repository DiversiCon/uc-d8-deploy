uuid: 1295da66-e361-4096-b0c6-65e70b7a59e4
langcode: en
status: true
dependencies:
  module:
    - uc_migrate
  enforced:
    module:
      - uc_migrate
id: pme_file_publication_images
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: pme_migration
label: 'Import PME Files: Publication images (public)'
source:
  urls: 'http://pme-cms.dev.uchicago.edu/migrate/publication_images'
  track_changes: true
  scheme: public
  item_selector: /
  fields:
    -
      name: key
      label: 'Legacy Key'
      selector: key
    -
      name: parent_title
      label: 'Parent Title'
      selector: parent_title
    -
      name: entry_date
      label: 'Entry Date'
      selector: entry_date
    -
      name: edit_date
      label: 'Edit Date'
      selector: edit_date
    -
      name: image
      label: Image
      selector: image
    -
      name: image_path
      label: 'Image Path'
      selector: image_path
    -
      name: image_mimetype
      label: 'Image MIME Content Type'
      selector: image_mimetype
    -
      name: description
      label: Description
      selector: description
    -
      name: title
      label: Title
      selector: title
    -
      name: url
      label: Url
      selector: url
  ids:
    key:
      type: string
  constants:
    is_true: true
    is_user: 1
process:
  skip_value:
    plugin: skip_on_value
    source: image_mimetype
    method: row
    value:
      - audio/mpeg
      - audio/x-ms-wma
  filename: filename
  source_full_path:
    plugin: urlencode
    source: image_path
  destination_full_path:
    plugin: destination_file_path
    source: image
  uri:
    plugin: file_copy
    source:
      - '@source_full_path'
      - '@destination_full_path'
    destination: 'public://migrated/'
    file_exists: 'use existing'
  filemime: image_mimetype
  status: constants/is_true
  created: entry_date
  changed: edit_date
  uid: constants/is_user
destination:
  plugin: 'entity:file'
migration_dependencies:
  required: {  }
  optional: {  }
