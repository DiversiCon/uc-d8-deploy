uuid: e535171c-118d-47cd-b27a-18d9388a66ab
langcode: en
status: true
dependencies:
  module:
    - uc_migrate
  enforced:
    module:
      - uc_migrate
id: pme_media_lab_images
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: pme_migration
label: 'Import PME Media: Lab Images'
source:
  urls: 'http://pme-cms.dev.uchicago.edu/migrate/lab_images'
  track_changes: true
  scheme: public
  item_selector: /
  fields:
    -
      name: key
      label: 'Legacy Key'
      selector: key
    -
      name: entry_date
      label: 'Entry Date'
      selector: entry_date
    -
      name: edit_date
      label: 'Edit Date'
      selector: edit_date
    -
      name: image_mimetype
      label: 'Image MIME Content Type'
      selector: image_mimetype
    -
      name: description
      label: Description
      selector: description
    -
      name: migrate_title
      label: Title
      selector: migrate_title
    -
      name: alt_text
      label: Alt Text
      selector: alt_text
  ids:
    key:
      type: string
  constants:
    bundle: 'image'
    is_true: true
    is_user: 1
process:
  skip_value:
    plugin: skip_on_value
    not_equals: true
    source: image_mimetype
    method: row
    value:
      - 'image/jpeg'
      - 'image/gif'
      - 'image/png'
  bundle: constants/bundle
  langcode:
    plugin: default_value
    source: language
    default_value: und
  name: migrate_title
  uid: constants/is_user
  status: constants/is_true
  created: entry_date
  changed: edit_date
  revision_uid: constants/is_user
  revision_log: ''
  revision_timestamp: entry_date
  field_media_image/target_id:
    plugin: migration_lookup
    migration: pme_file_lab_images
    source: key
  field_image_caption: description
  field_media_image/alt: alt_text
  field_media_image/title: migrate_title
destination:
  plugin: 'entity:media'
  default_bundle: image
migration_dependencies:
  required:
    - migrate_file
    - migrate_users
  optional:
    - d7_field_instance
dependencies:
  module:
    - uc_migrate
  enforced:
    module:
      - uc_migrate
