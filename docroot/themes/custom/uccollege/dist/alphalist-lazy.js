(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"9v4h":function(e,t,o){"use strict";function n(e,t,o,n,s,r,i){try{var a=e[r](i),l=a.value}catch(e){return void o(e)}a.done?t(l):Promise.resolve(l).then(n,s)}function s(e){return function(){var t=this,o=arguments;return new Promise(function(s,r){function i(e){n(l,s,r,i,a,"next",e)}function a(e){n(l,s,r,i,a,"throw",e)}var l=e.apply(t,o);i(void 0)})}}o.r(t);var r=o("o0o1"),i=o.n(r),a=o("vDqi"),l=o.n(a),c=o("/+cc"),u=o.n(c),p=o("bt/X"),d=o.n(p),h=o("xweI"),f=o.n(h),v=o("k4Da"),m=o.n(v),y=o("qPyV"),g=o.n(y),_={name:"uc-alphalist",components:{ucDropdown:function(){return o.e(9).then(o.bind(null,"P8gK"))}},props:{endpoint:{type:String,default:"/api/faculty_index"},groupBy:{type:String,default:"lastName"},defaultTopic:{type:String,default:"All Topics"},hideDropdown:{type:Boolean,default:!1}},data:function(){return{allData:null,allTopics:null,activeLetter:null,results:null,ready:!1,query:null,topics:null,selectedTopic:this.defaultTopic,sections:null,filterBySection:!1,hideSecondaryDropdown:this.hideDropdown,noResults:!1,stickyControls:!1,alphabet:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],controlsPosition:0,isMobile:1100>window.innerWidth,useStorage:!1,searchIndex:null,allTopicOption:{name:"All Topics",value:"All Topics"},allSectionOption:{name:"All Sections",value:"All Topics"}}},mounted:function(){var e=this;e.controlsPosition=e.$refs.controls.getBoundingClientRect().top,e.handleScroll(),window.addEventListener("scroll",e.handleScroll),window.addEventListener("resize",this.debounce(200,function(){e.isMobile=1100>window.innerWidth,e.controlsPosition=e.$refs.controls.getBoundingClientRect().top})),e.$route.query.query&&(e.query=e.$route.query.query),e.$route.query.topic&&(e.selectedTopic=e.$route.query.topic),e.filterBySection="All Topics"!==e.defaultTopic&&!e.hideDropdown,e.init()},methods:{handleScroll:function(){var e=this,t=window.scrollY,o=document.querySelector(".c-alphalist__controls").offsetHeight,n=e.isMobile?document.querySelector(".c-masthead")?document.querySelector(".c-masthead").offsetHeight:0:document.querySelector(".c-nav")?document.querySelector(".c-nav").offsetHeight:0;t>=e.controlsPosition-n?(this.stickyControls=!0,this.$refs.controls.style.top=n+"px",this.$refs.grid.style.marginTop=e.isMobile?o+"px":n+o+"px"):(this.stickyControls=!1,this.$refs.grid.style.marginTop="0")},init:function(){if(this.checkStorage()&&this.useStorage){var e=localStorage.getItem("uc-faculty"),t=JSON.parse(e);this.allData=t.data,this.setup()}else this.getAllData()},getAllData:function(){var e=s(i.a.mark(function e(){var t,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.prev=1,e.next=4,l.a.get(t.endpoint);case 4:o=e.sent,t.allData=o.data.data,this.useStorage&&t.updateStorage(),t.setup(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(){return e.apply(this,arguments)}}(),setup:function(){var e=s(i.a.mark(function e(){var t,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this).filterBySection&&(t.allData=t.filterBy("topics",t.selectedTopic),t.getSections()),e.next=4,t.getTopics();case 4:o={shouldSort:!0,tokenize:!0,threshold:0,location:0,distance:0,maxPatternLength:32,minMatchCharLength:1,keys:["firstName","lastName","topics"]},t.searchIndex=new u.a(t.allData,o),t.query?t.doSearch():t.getResults();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkStorage:function(){var e=!0,t=JSON.parse(localStorage.getItem("uc-faculty")),o=new Date,n=null===t?o.getTime():new Date(t.timestamp);return null===t?e=!1:o.getTime()>n.getTime()&&(e=!1),e},updateStorage:function(){var e={},t=new Date;t.setHours(t.getHours()+24),e.timestamp=t,e.data=this.allData,localStorage.setItem("uc-faculty",JSON.stringify(e))},getResults:function(){var e=this;if(e.selectedTopic===e.allTopicOption.value)e.results=e.processResults(e.allData);else{var t=m()(e.allData,function(t){return t.department===e.selectedTopic});e.results=e.processResults(t)}if(e.filterBySection){var o=e.$route.query.section?{name:e.$route.query.section,value:e.$route.query.section}:e.allSectionOption;e.$refs.dropdownSection.handleSelect(o,!1)}else e.$refs.dropdownDept.handleSelect({name:e.selectedTopic,value:e.selectedTopic},!1)},doSearch:function(){var e=this;e.updateQueryString(),e.resetLetters(),e.$refs.dropdownDept.reset(),e.$refs.dropdownSection.reset();var t=e.allData;0<e.query.length&&(t=e.searchIndex.search(e.query)),0===t.length?(e.noResults=!0,e.results=[]):(e.noResults=!1,e.results=e.processResults(t))},updateQueryString:function(){""===this.query?this.removeQuery():this.$router.replace({query:{query:this.query}})},removeQuery:function(){var e=Object.assign({},this.$route.query);delete e.query,this.$router.replace({query:e})},processResults:function(e){var t=this;return e=f()(e,[t.groupBy]),e=d()(e,function(e){return e.lastName.substr(0,1)}),t.ready=!0,t.noResults=!1,e},getTopics:function(){var e=this,t=[e.allTopicOption];e.allData.forEach(function(e){e.topics&&null!==e.topics&&e.topics.forEach(function(e){t.push({name:e,value:e})})});var o=f()(t,"name");return e.topics=g()(o,"name"),new Promise(function(e){setTimeout(function(){e("done")},100)})},getSections:function(){var e=this,t=[e.allSectionOption];e.allData.forEach(function(e){null!==e.section&&t.push({name:e.section,value:e.section})});var o=f()(t,"name");e.sections=g()(o,"name"),2>e.sections.length&&(e.hideSecondaryDropdown=!0)},selectTopic:function(e){var t=this,o=t.filterBySection?"section":"topics";if(t.query=null,t.removeQuery(),t.resetLetters(),e===t.allSectionOption.value||e===t.allTopicOption.value)t.results=t.processResults(t.allData);else{var n=t.filterBy(o,e);t.results=t.processResults(n)}},filterBy:function(e,t){return"topics"===e?m()(this.allData,function(o){var n=!1;return o[e]&&o[e].some(function(e){if(e===t)return n=!0,!0}),n}):m()(this.allData,function(o){return o[e]===t})},multiples:function(e){var t=[];return Object.keys(e).sort().forEach(function(o){t[o]=e[o]}),t.sort().join(", ")},sorted:function(e){return f()(e,[function(e){return e}])},updateSearch:function(e){this.query=e,this.doSearch()},listLinks:function(e){var t=[];return e.forEach(function(e){t.push('<a href="'.concat(e.url,'" target="_blank">').concat(e.name,"</a>"))}),t.join(", ")},setActiveLetter:function(e){this.activeLetter=e,this.jumpTo(e)},resetLetters:function(){this.activeLetter=null,window.scroll(0,0)},jumpTo:function(){var e=this,t=document.getElementById(e.activeLetter),o=t.offsetTop,n=document.querySelector(".c-alphalist__controls").offsetHeight,s=e.isMobile?document.querySelector(".c-masthead").offsetHeight:document.querySelector(".c-nav").offsetHeight;o-="A"===e.activeLetter?n+s:n+s+20,window.scroll(0,o),t.focus()},scrollDown:function(){var e=this,t=document.getElementById(e.activeLetter).offsetTop-140,o=document.documentElement.scrollTop||document.body.scrollTop;(o+=2)<t&&!e.atBottom()&&(window.requestAnimationFrame(e.scrollDown),window.scrollTo(t,o+75))},atBottom:function(){return document.documentElement.offsetHeight<=window.innerHeight+(window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0))}}},w=o("KHd+"),S=Object(w.a)(_,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"c-alphalist"},[o("div",{ref:"controls",staticClass:"c-alphalist__controls",class:{sticky:e.stickyControls}},[o("div",{staticClass:"c-searchform c-alphalist__searchform",class:{"c-alphalist__searchform--nodropdown":e.hideSecondaryDropdown}},[o("form",{attrs:{autocomplete:"off","accept-charset":"UTF-8"},on:{submit:function(t){return t.preventDefault(),e.doSearch(t)}}},[o("div",{staticClass:"c-searchform__input_container"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",name:"query","aria-label":"Search by name",placeholder:"Search by name"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),o("button",{attrs:{type:"submit",role:"button","aria-label":"search"},on:{click:function(t){return t.preventDefault(),e.doSearch(t)}}},[o("uc-icon",{attrs:{glyph:"search"}})],1)])])]),e._v(" "),o("uc-dropdown",{directives:[{name:"show",rawName:"v-show",value:!e.hideDropdown&&!e.filterBySection,expression:"!hideDropdown && !filterBySection"}],ref:"dropdownDept",staticClass:"c-alphalist__dropdown",attrs:{options:e.topics,"on-select":e.selectTopic,"default-selection":e.selectedTopic,"display-name":"All Topics",name:"topic"}}),e._v(" "),o("uc-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.filterBySection&&!e.hideSecondaryDropdown,expression:"filterBySection && !hideSecondaryDropdown"}],ref:"dropdownSection",staticClass:"c-alphalist__dropdown",attrs:{options:e.sections,"on-select":e.selectTopic,name:"section","display-name":"All Sections","default-selection":"All Sections"}}),e._v(" "),e.ready?o("ul",{staticClass:"c-alphalist__alphabet"},e._l(e.alphabet,function(t){return o("li",{key:"index-"+t},[e.results[t]?o("a",{class:{active:t===e.activeLetter},attrs:{href:"#"+t},on:{click:function(o){return o.preventDefault(),e.setActiveLetter(t)}}},[e._v(e._s(t))]):o("span",[e._v(e._s(t))])])}),0):e._e()],1),e._v(" "),e.noResults?o("div",{staticClass:"c-alphalist__noresults"},[o("h2",[e._v("No results found.")])]):e._e(),e._v(" "),e.noResults?e._e():o("div",{ref:"grid"},e._l(e.results,function(t,n){return o("section",{key:"letter-"+n,staticClass:"c-alphalist__grid"},[o("h2",[o("div",{staticClass:"c-alphalist__anchor",attrs:{id:n,tabindex:"0"}},[e._v(e._s(n))])]),e._v(" "),o("div",e._l(t,function(t){return o("div",{key:"item-"+t.id,staticClass:"c-alphalist__grid-item"},[o("div",{staticClass:"c-alphalist__grid-image c-list__item-imagewrap"},[o("svg",{staticClass:"c-icon"},[o("use",{attrs:{"xlink:href":"/themes/custom/uccollege/dist/icons.svg#phoenix"}})]),e._v(" "),t.photoUrl&&t.showPhoto?o("img",{staticClass:"lazyload",attrs:{"data-src":t.photoUrl+"?cache="+t.id,alt:""+t.fullName,width:"345",height:"345"}}):e._e()]),e._v(" "),o("div",{staticClass:"c-alphalist__grid-content"},[o("h3",{},[o("a",{attrs:{href:t.pathAlias?"/faculty"+t.pathAlias:"/faculty/"+t.id}},[e._v("\n                "+e._s(t.fullName)),t.degree?o("span",[e._v(", "+e._s(t.degree))]):e._e()])]),e._v(" "),o("p",[o("strong",[e._v("Title: ")]),e._v(e._s(t.title))]),e._v(" "),t.topics?o("p",[o("strong",[e._v("Research topics:")]),e._v("\n              "+e._s(t.topics.join(", "))+"\n            ")]):e._e(),e._v(" "),t.research_group?o("p",[o("strong",[e._v("Research group:")]),e._v(" "),o("a",{attrs:{href:t.research_group.url}},[e._v(e._s(t.research_group.name))])]):e._e()])])}),0)])}),0)])},[],!1,null,null,null);t.default=S.exports}}]);