(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"803L":function(t,e,s){"use strict";s.r(e);var a=s("vDqi"),i=s.n(a),r={name:"UcList",components:{UcFilter:function(){return s.e(13).then(s.bind(null,"zN7+"))},UcPager:function(){return s.e(23).then(s.bind(null,"cVDb"))},UcSorter:function(){return s.e(31).then(s.bind(null,"f41u"))}},props:{datasource:{type:String,required:!0},categorysource:String,itemsPerPage:{type:Number,default:10},filtered:{type:Boolean,default:!0},sidebar:{type:Boolean,default:!0},paginate:{type:Boolean,default:!0},sorted:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},preSelected:{type:String},filterTitle:String},data:function(){return{results:null,categories:null,current:1,ready:!1,endpoint:this.datasource,pagerData:null,selected:this.preSelected,noResults:!1,scrollTo:null,firstScroll:!0,sortBy:"rank",isMobile:1024>window.innerWidth}},computed:{sorterData:function(){var t={};return t.start=this.itemsPerPage*this.pagerData.current-this.itemsPerPage+1,t.end=t.start+(this.results.length-1),t.total=this.pagerData.totalResults,t}},watch:{endpoint:function(){this.getData()}},mounted:function(){var t=this;t.scrollTo=t.$el.offsetTop-40,window.addEventListener("resize",function(){t.isMobile=1024>window.innerWidth}),t.isSearch?(t.$route.query.query?t.getData():t.noResults=!0,this.$on("onSortChange",function(e){t.sortBy=e,t.getData()})):(t.selected=t.$route.query.section?t.$route.query.section:t.preSelected?t.preSelected:"all",t.getCategories())},methods:{getCategories:function(){var t=this;i.a.get(t.categorysource).then(function(e){t.categories=e.data.categories,t.getData()}).catch(function(t){console.log(t)}).then(function(){})},getData:function(t){var e=this,s=e.isSearch?e.$route.query.query:e.selected,a=e.endpoint;a+=e.isSearch?"".concat(e.sortBy,"/").concat(s):s,a+="?items_per_page=".concat(e.itemsPerPage),t&&(a+="&page=".concat(t-1)),i.a.get(a).then(function(t){e.results=t.data.items,e.noResults=0===e.results.length,e.noResults||(e.results.forEach(function(t){t.url_target="",void 0!==t.authored_url&&""!==t.authored_url&&(t.url=t.authored_url,t.url_target="_blank")}),e.pagerData=t.data.pager),e.ready=!0}).catch(function(t){console.log(t)}).then(function(){e.scrollToTop()})},handleSelect:function(t){this.selected="all"===t?"all":t.join(","),this.getData()},handlePage:function(t){this.getData(t)},getAlt:function(t){return t.imagealt?t.imagealt:t.title},scrollToTop:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;t>this.scrollTo?(window.requestAnimationFrame(this.scrollToTop),window.scrollTo(this.scrollTo,t-t/15)):this.focusTop()},focusTop:function(){if(this.firstScroll)this.firstScroll=!1;else if("all"===this.selected){var t=this.$el.querySelector(".c-list__item a");t&&t.focus()}}}},l=s("KHd+"),o=Object(l.a)(r,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"c-list"},[t.noResults?s("div",{staticClass:"c-list__noresults"},[s("h1",[t._v("No results")])]):t._e(),t._v(" "),s("div",{staticClass:"c-list__content-wrap c-content",class:{"c-content--sidebar-right":t.sidebar}},[t.filtered&&!t.isMobile?s("div",{staticClass:"c-list__skip"},[s("a",{attrs:{href:"#list-filters"}},[t._v("Skip to filters")])]):t._e(),t._v(" "),s("section",{staticClass:"c-list__content",attrs:{id:"list-results"}},[t.ready&&t.isSearch&&!t.noResults?s("uc-sorter",{attrs:{"sort-by":t.sortBy,start:t.sorterData.start,end:t.sorterData.end,total:t.sorterData.total}}):t._e(),t._v(" "),t.noResults?t._e():s("div",t._l(t.results,function(e){return s("div",{key:"list-"+e.nid,staticClass:"c-list__item"},[s("div",{staticClass:"c-list__item-image"},[s("a",{staticClass:"c-list__item-imagelink",attrs:{href:e.url,target:e.url_target}},[s("div",{staticClass:"c-list__item-imagewrap"},[s("svg",{staticClass:"c-icon"},[s("use",{attrs:{"xlink:href":"/themes/custom/uccollege/dist/icons.svg#phoenix"}})]),t._v(" "),e.image?s("img",{staticClass:"lazyload",attrs:{"data-src":e.image,alt:t.getAlt(e)}}):t._e()])])]),t._v(" "),s("div",{staticClass:"c-list__item-text"},[s("h3",{staticClass:"c-list__item-title"},[s("a",{staticClass:"c-list__item-titlelink",attrs:{href:e.url,target:e.url_target}},[t._v(t._s(e.title))])]),t._v(" "),e.description?s("div",{staticClass:"c-list__item-description",domProps:{innerHTML:t._s(e.description)}}):t._e(),t._v(" "),e.source||e.date?s("p",{staticClass:"c-list__item-meta"},[e.author?s("span",{staticClass:"c-list__item-source"},[t._v("\n                By "),s("a",{attrs:{href:e.authorurl}},[t._v(t._s(e.author))])]):t._e(),t._v(" "),e.author&&e.date?s("span",{staticClass:"c-list__separator"},[t._v(" | ")]):t._e(),t._v(" "),e.date?s("time",{staticClass:"c-list__item-date",attrs:{datetime:e.datetime}},[t._v(t._s(e.date))]):t._e()]):t._e()])])}),0)],1),t._v(" "),t.ready&&t.paginate&&!t.noResults?s("uc-pager",{staticClass:"c-list__pager",attrs:{"on-page":t.handlePage,page:t.pagerData.current,total:t.pagerData.total}}):t._e(),t._v(" "),t.sidebar?s("div",{staticClass:"c-list__sidebar c-content__sidebar"},[t.ready&&t.filtered&&!t.isMobile?s("uc-filter",{staticClass:"show-for-large",attrs:{id:"list-filters","on-select":t.handleSelect,categories:t.categories,"pre-selected":t.preSelected,title:t.filterTitle}}):t._e(),t._v(" "),t._t("default")],2):t._e()],1)])},[],!1,null,null,null);e.default=o.exports}}]);